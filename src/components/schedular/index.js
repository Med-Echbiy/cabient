(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Scheduler:()=>Ve});const n=require("react/jsx-runtime"),r=require("react"),a=require("@mui/material"),i=require("date-fns"),s=({date:e,onClick:t,locale:r})=>(0,n.jsxs)("div",{children:[(0,n.jsx)(a.Typography,Object.assign({style:{fontWeight:(0,i.isToday)(e)?"bold":"inherit"},color:(0,i.isToday)(e)?"primary":"inherit",className:t?"rs__hover__op":"",onClick:n=>{n.stopPropagation(),t&&t(e)}},{children:(0,i.format)(e,"dd",{locale:r})})),(0,n.jsx)(a.Typography,Object.assign({color:(0,i.isToday)(e)?"primary":"inherit",style:{fontWeight:(0,i.isToday)(e)?"bold":"inherit",fontSize:11}},{children:(0,i.format)(e,"eee",{locale:r})}))]}),o=require("@mui/icons-material/ArrowRightRounded");var l=e.n(o);const d=require("@mui/icons-material/ArrowLeftRounded");var c=e.n(d);const u=require("@mui/icons-material/EventNoteRounded");var g=e.n(u);const h=require("@mui/icons-material/ClearRounded");var v=e.n(h);const y=require("@mui/icons-material/SupervisorAccountRounded");var p=e.n(y);const m=(0,a.styled)("div")((({theme:e,dialog:t})=>({position:"relative","& .rs__table_loading":{position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:999999,"& .rs__table_loading_internal":{background:t?"":(0,a.alpha)(e.palette.background.paper,.4),height:"100%","& > span":{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",flexDirection:"column","& >span":{marginBottom:15}}}}}))),f=(0,a.styled)("div")((({resource_count:e})=>({position:"relative",display:"flex",flexDirection:e>1?"row":"column",width:"100%",boxSizing:"content-box","& > div":{flexShrink:0,flexGrow:1}}))),j=(0,a.styled)(a.Paper)((({sticky:e="0"})=>({display:"flex",justifyContent:"space-between",alignItems:"center",position:"1"===e?"sticky":"relative",top:"1"===e?0:void 0,zIndex:"1"===e?999:void 0,boxShadow:"none"}))),b=(0,a.styled)("div")((({days:e,sticky:t="0",stickyNavigation:n,indent:r="1",theme:i})=>({display:"grid",gridTemplateColumns:+r>0?`10% repeat(${e}, 1fr)`:`repeat(${e}, 1fr)`,overflowX:"auto",overflowY:"hidden",position:"1"===t?"sticky":"relative",top:"1"===t?n?36:0:void 0,zIndex:"1"===t?99:void 0,[i.breakpoints.down("sm")]:{gridTemplateColumns:+r>0?`30px repeat(${e}, 1fr)`:""},borderStyle:"solid",borderColor:i.palette.grey[300],borderWidth:"0 0 0 1px","&:first-of-type":{borderWidth:"1px 0 0 1px"},"&:last-of-type":{borderWidth:"0 0 1px 1px"},"& .rs__cell":{background:i.palette.background.paper,position:"relative",borderStyle:"solid",borderColor:i.palette.grey[300],borderWidth:"0 1px 1px 0","&.rs__header":{"& > :first-of-type":{padding:"2px 5px"}},"&.rs__header__center":{padding:"6px 0px"},"&.rs__time":{display:"flex",alignItems:"center",justifyContent:"center",position:"sticky",left:0,zIndex:99,[i.breakpoints.down("sm")]:{writingMode:"vertical-rl"}},"& > button":{width:"100%",height:"100%",borderRadius:0,cursor:"pointer","&:hover":{background:(0,a.alpha)(i.palette.primary.main,.1)}},"& .rs__event__item":{position:"absolute",zIndex:1},"& .rs__multi_day":{position:"absolute",zIndex:1,textOverflow:"ellipsis"},"& .rs__block_col":{display:"block",position:"relative"},"& .rs__hover__op":{cursor:"pointer","&:hover":{opacity:.7,textDecoration:"underline"}},"&:not(.rs__time)":{minWidth:65}}}))),x=(0,a.styled)(a.Paper)((({theme:e,disabled:t})=>({width:"99.5%",height:"100%",display:"block",color:t?"#808080":e.palette.primary.contrastText,cursor:t?"not-allowed":"pointer",overflow:"hidden","& .MuiButtonBase-root":{width:"100%",height:"100%",display:"block",textAlign:"left","& > div":{height:"100%"}}}))),O=(0,a.styled)("div")((({theme:e})=>({maxWidth:"100%",width:400,"& > div":{padding:"5px 10px","& .rs__popper_actions":{display:"flex",alignItems:"center",justifyContent:"space-between","& .MuiIconButton-root":{color:e.palette.primary.contrastText}}}}))),w=(0,a.styled)("div")((({theme:e})=>({display:"inherit","& .MuiIconButton-root":{color:e.palette.primary.contrastText},"& .MuiButton-root":{"&.delete":{color:e.palette.error.main},"&.cancel":{color:e.palette.action.disabled}}}))),_=(0,a.styled)("div")((({theme:e})=>({position:"absolute",zIndex:9,width:"100%",display:"flex","& > div:first-of-type":{height:12,width:12,borderRadius:"50%",background:e.palette.error.light,marginLeft:-6,marginTop:-5},"& > div:last-of-type":{borderTop:`solid 2px ${e.palette.error.light}`,width:"100%"}}))),k=require("@mui/icons-material/DeleteRounded");var D=e.n(k);const C=require("@mui/icons-material/EditRounded");var M=e.n(C);const T=require("date-fns/locale/en-US");var S=e.n(T);const F=(e,t,n)=>{var r;const a=(null===(r=e.config)||void 0===r?void 0:r.multiple)&&!Array.isArray((null==n?void 0:n[e.name])||e.default),i=a?t?[t]:[]:t;return{value:i,validity:a?i.length:i}},E=(e,t,n,r)=>{var a;const i=n.idField,s=r.find((e=>e.name===i)),o=!!(null===(a=null==s?void 0:s.config)||void 0===a?void 0:a.multiple),l=[];for(const r of e){const e=o&&!Array.isArray(r[i])?[r[i]]:r[i];(o||Array.isArray(e)?e.includes(t[i]):e===t[i])&&l.push(Object.assign(Object.assign({},r),{color:r.color||t[n.colorField||""]}))}return l},I=(e,t)=>Math.ceil(e)/t,P=(e,t)=>Math.max(e/t,60),R=(e,t)=>(0,i.differenceInDays)((0,i.endOfDay)((0,i.addSeconds)(t,-1)),(0,i.startOfDay)(e)),$=(e,t,n)=>{const r=[];for(let a=0;a<e.length;a++){const s=q(e[a],n);s.allDay||!(0,i.isSameDay)(t,s.start)||R(s.start,s.end)||r.push(s)}return W(r)},W=e=>e.sort(((e,t)=>{const n=e.end.getTime()-e.start.getTime();return t.end.getTime()-t.start.getTime()-n})),N=(e,t,n,r)=>{var a;const s=Array.isArray(t),o=[],l={};for(let r=0;r<e.length;r++){const a=q(e[r],n);let d=a.allDay||R(a.start,a.end)>0;if(d&&(d=s?t.some((e=>(0,i.isWithinInterval)(e,{start:(0,i.startOfDay)(a.start),end:(0,i.endOfDay)(a.end)}))):(0,i.isWithinInterval)(t,{start:(0,i.startOfDay)(a.start),end:(0,i.endOfDay)(a.end)}),d))if(o.push(a),s)for(const e of t){const t=(0,i.format)(e,"yyyy-MM-dd");(0,i.isWithinInterval)(e,{start:(0,i.startOfDay)(a.start),end:(0,i.endOfDay)(a.end)})&&(l[t]=(l[t]||[]).concat(a))}else{const e=(0,i.format)(a.start,"yyyy-MM-dd");l[e]=(l[e]||[]).concat(a)}}return s&&r?(null===(a=Object.values(l).sort(((e,t)=>t.length-e.length)))||void 0===a?void 0:a[0])||[]:o},q=(e,t)=>Object.assign(Object.assign({},e),{start:z(e.start,t),end:z(e.end,t)}),z=(e,t)=>new Date(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"medium",timeZone:t}).format(e));var H=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const B={weekDays:[0,1,2,3,4,5,6],weekStartOn:6,startHour:9,endHour:17,navigation:!0,disableGoToDay:!1},A={weekDays:[0,1,2,3,4,5,6],weekStartOn:6,startHour:9,endHour:17,step:60,navigation:!0,disableGoToDay:!1},L={startHour:9,endHour:17,step:60,navigation:!0},V={idField:"assignee",textField:"text",subTextField:"subtext",avatarField:"avatar",colorField:"color"},G=(e={})=>{const{navigation:t,form:n,event:r}=e,a=H(e,["navigation","form","event"]);return Object.assign({navigation:Object.assign({month:"Month",week:"Week",day:"Day",today:"Today"},t),form:Object.assign({addTitle:"Add Event",editTitle:"Edit Event",confirm:"Confirm",delete:"Delete",cancel:"Cancel"},n),event:Object.assign({title:"Title",start:"Start",end:"End",allDay:"All Day"},r)},Object.assign({moreEvents:"More...",loading:"Loading..."},a))},Z=e=>{const{month:t,week:n,day:r,translations:a,resourceFields:i,view:s}=e,o=H(e,["month","week","day","translations","resourceFields","view"]),l=(e=>{const{month:t,week:n,day:r}=e;return{month:null!==t?Object.assign(B,t):null,week:null!==n?Object.assign(A,n):null,day:null!==r?Object.assign(L,r):null}})(e),d=s||"week",c=l[d]?d:(e=>{if(e.month)return"month";if(e.week)return"week";if(e.day)return"day";throw new Error("No views were selected")})(l);return Object.assign(Object.assign(Object.assign({},l),{translations:G(a),resourceFields:Object.assign(V,i),view:c}),Object.assign({height:600,navigation:!0,selectedDate:new Date,disableViewNavigator:!1,events:[],fields:[],loading:void 0,customEditor:void 0,onConfirm:void 0,onDelete:void 0,viewerExtraComponent:void 0,resources:[],resourceHeaderComponent:void 0,resourceViewMode:"default",direction:"ltr",dialogMaxWidth:"md",locale:S(),deletable:!0,editable:!0,hourFormat:"12",draggable:!0},o))},K=Object.assign(Object.assign({},Z({})),{setProps:()=>{},dialog:!1,selectedRange:void 0,selectedEvent:void 0,selectedResource:void 0,handleState:()=>{},getViews:()=>[],triggerDialog:()=>{},triggerLoading:()=>{},handleGotoDay:()=>{},confirmEvent:()=>{},onDrop:()=>{}}),X=(0,r.createContext)(K),U=()=>(0,r.useContext)(X),Q=({event:e,onDelete:t,onEdit:i})=>{const{translations:s,direction:o,editable:l,deletable:d}=U(),[c,u]=(0,r.useState)(!1),g=()=>{if(!c)return u(!0);t()},h=(0,r.useMemo)((()=>void 0!==e.deletable?e.deletable:d),[d,e.deletable]),v=(0,r.useMemo)((()=>void 0!==e.editable?e.editable:l),[l,e.editable]);return(0,n.jsxs)(w,{children:[(0,n.jsx)(a.Grow,Object.assign({in:!c,exit:!1,timeout:400,unmountOnExit:!0},{children:(0,n.jsxs)("div",{children:[v&&(0,n.jsx)(a.IconButton,Object.assign({size:"small",onClick:i},{children:(0,n.jsx)(M(),{})})),h&&(0,n.jsx)(a.IconButton,Object.assign({size:"small",onClick:g},{children:(0,n.jsx)(D(),{})}))]})})),(0,n.jsx)(a.Slide,Object.assign({in:c,direction:"rtl"===o?"right":"left",unmountOnExit:!0,timeout:400,exit:!1},{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(a.Button,Object.assign({className:"delete",size:"small",onClick:g},{children:s.form.delete.toUpperCase()})),(0,n.jsx)(a.Button,Object.assign({className:"cancel",size:"small",onClick:()=>u(!1)},{children:s.form.cancel.toUpperCase()}))]})}))]})};const Y=({event:e,multiday:t,hasPrev:s,hasNext:o,showdate:d=!0})=>{const{triggerDialog:u,onDelete:h,events:y,handleState:m,triggerLoading:f,customViewer:j,viewerExtraComponent:b,fields:w,direction:_,resources:k,resourceFields:D,locale:C,viewerTitleComponent:M,hourFormat:T,eventRenderer:S,onEventClick:F,view:E,draggable:I,translations:P,editable:$}=U(),W=(e=>{const t=(0,a.useTheme)();return{draggable:!0,onDragStart:n=>{n.stopPropagation(),n.dataTransfer.setData("text/plain",`${e.event_id}`),n.currentTarget.style.backgroundColor=t.palette.error.main},onDragEnd:n=>{n.currentTarget.style.backgroundColor=e.color||t.palette.primary.main},onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDragEnter:e=>{e.stopPropagation(),e.preventDefault()}}})(e),[N,q]=(0,r.useState)(null),[z,H]=(0,r.useState)(!1),B=(0,a.useTheme)(),A="12"===T?"hh:mm a":"HH:mm",L="rtl"===_?c():l(),V="rtl"===_?l():c(),G=R(e.start,e.end)<=0&&e.allDay,Z=t=>{!(null==t?void 0:t.currentTarget)&&z&&H(!1),u(!0,e)},K=()=>{return t=void 0,n=void 0,a=function*(){try{f(!0);let t=e.event_id;if(h){const e=yield h(t);t=e||""}if(t){Z();const e=y.filter((e=>e.event_id!==t));m(e,"events")}}catch(e){console.error(e)}finally{f(!1)}},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,o)}l((a=a.apply(t,n||[])).next())}));var t,n,r,a},X=(0,r.useMemo)((()=>{if(e.disabled||!$)return!1;let t=void 0===I||I;return void 0!==e.draggable&&(t=e.draggable),t}),[I,$,e.disabled,e.draggable]),Y=(0,r.useMemo)((()=>{if("function"==typeof S&&!t&&"month"!==E){const t=S(Object.assign(Object.assign({event:e,onClick:Z},W),{view:E}));if(t)return(0,n.jsx)(x,Object.assign({onClick:()=>u(!0,e)},{children:t}),`${e.start.getTime()}_${e.end.getTime()}_${e.event_id}_day_bobi`)}let r=(0,n.jsxs)("div",Object.assign({style:{padding:"2px 6px",display:"flex",justifyContent:"center",flexDirection:"column",height:"100%"}},{children:[(0,n.jsx)(a.Typography,Object.assign({variant:"subtitle2",style:{fontSize:12},noWrap:!0},{children:e.title})),d&&(0,n.jsx)(a.Typography,Object.assign({style:{fontSize:11},noWrap:!0},{children:`${(0,i.format)(e.start,A,{locale:C})} - ${(0,i.format)(e.end,A,{locale:C})}`}))]}));return t&&(r=(0,n.jsxs)("div",Object.assign({style:{padding:2,display:"flex",alignItems:"center",justifyContent:"space-between"}},{children:[(0,n.jsx)(a.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:s?(0,n.jsx)(V,{fontSize:"small",sx:{display:"flex"}}):d&&!G&&(0,i.format)(e.start,A,{locale:C})})),(0,n.jsx)(a.Typography,Object.assign({variant:"subtitle2",align:"center",sx:{fontSize:12},noWrap:!0},{children:e.title})),(0,n.jsx)(a.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:o?(0,n.jsx)(L,{fontSize:"small",sx:{display:"flex"}}):d&&!G&&(0,i.format)(e.end,A,{locale:C})}))]}))),(0,n.jsx)(x,Object.assign({disabled:e.disabled,sx:{bgcolor:e.disabled?"#d0d0d0":e.color||B.palette.primary.main}},{children:(0,n.jsx)(a.ButtonBase,Object.assign({onClick:t=>{t.preventDefault(),t.stopPropagation(),Z(t),"function"==typeof F&&F(e)},disabled:e.disabled},{children:(0,n.jsx)("div",Object.assign({},W,{draggable:X},{children:r}))}))}),`${e.start.getTime()}_${e.end.getTime()}_${e.event_id}`)}),[E,s,o,e,X,C,B.palette]);return(0,n.jsxs)(r.Fragment,{children:[Y,(0,n.jsx)(a.Popover,Object.assign({open:Boolean(N),anchorEl:N,onClose:()=>{Z()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClick:e=>{e.stopPropagation()}},{children:"function"==typeof j?j(e,(()=>Z())):(()=>{const t=D.idField,r=k.filter((n=>Array.isArray(e[t])?e[t].includes(n[t]):n[t]===e[t]));return(0,n.jsxs)(O,{children:[(0,n.jsxs)(a.Box,Object.assign({sx:{bgcolor:e.color||B.palette.primary.main,color:B.palette.primary.contrastText}},{children:[(0,n.jsxs)("div",Object.assign({className:"rs__popper_actions"},{children:[(0,n.jsx)("div",{children:(0,n.jsx)(a.IconButton,Object.assign({size:"small",onClick:()=>{Z()}},{children:(0,n.jsx)(v(),{color:"disabled"})}))}),(0,n.jsx)(Q,{event:e,onDelete:K,onEdit:()=>{Z(),u(!0,e)}})]})),M instanceof Function?M(e):(0,n.jsx)(a.Typography,Object.assign({style:{padding:"5px 0"},noWrap:!0},{children:e.title}))]})),(0,n.jsxs)("div",Object.assign({style:{padding:"5px 10px"}},{children:[(0,n.jsxs)(a.Typography,Object.assign({style:{display:"flex",alignItems:"center",gap:8},color:"textSecondary",variant:"caption",noWrap:!0},{children:[(0,n.jsx)(g(),{}),G?P.event.allDay:`${(0,i.format)(e.start,`dd MMMM yyyy ${A}`,{locale:C})} - ${(0,i.format)(e.end,`dd MMMM yyyy ${A}`,{locale:C})}`]})),r.length>0&&(0,n.jsxs)(a.Typography,Object.assign({style:{display:"flex",alignItems:"center",gap:8},color:"textSecondary",variant:"caption",noWrap:!0},{children:[(0,n.jsx)(p(),{}),r.map((e=>e[D.textField])).join(", ")]})),b instanceof Function?b(w,e):b]}))]})})()}))]})},J=({resource:e})=>{const{resourceHeaderComponent:t,resourceFields:i,resources:s,direction:o,resourceViewMode:l}=U(),{width:d}=function(){const[e,t]=(0,r.useState)({width:0,height:0});return(0,r.useEffect)((()=>{if("undefined"==typeof window)return;const e=()=>{t((e=>{const{innerWidth:t,innerHeight:n}=window;return e.width!==t||e.height!==n?{width:t,height:n}:e}))};return e(),window.addEventListener("resize",e,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",e)}}),[]),e}(),c=e[i.textField],u=e[i.subTextField||""],g=e[i.avatarField||""],h=e[i.colorField||""];if(t instanceof Function)return t(e);const v="tabs"===l?{}:{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px"};return(0,n.jsxs)(a.ListItem,Object.assign({sx:Object.assign({padding:"2px 10px",textAlign:"rtl"===o?"right":"left"},v),component:"span"},{children:[(0,n.jsx)(a.ListItemAvatar,{children:(0,n.jsx)(a.Avatar,{style:{background:h},alt:c,src:g})}),(0,n.jsx)(a.ListItemText,{primary:(0,n.jsx)(a.Typography,Object.assign({variant:"body2",noWrap:!0},{children:c})),secondary:(0,n.jsx)(a.Typography,Object.assign({variant:"caption",color:"textSecondary",noWrap:!0},{children:u})),style:{width:d/(s.length+1)}})]}))},ee=require("prop-types");var te=e.n(ee);const ne=require("@mui/material/styles");function re(e){const{children:t,value:r,index:a}=e;return r===a?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)(n.Fragment,{})}re.propTypes={children:te().node,index:te().any.isRequired,value:te().any.isRequired};const ae=(0,ne.styled)("div")((({theme:e})=>({flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center","& .tabs":{borderColor:e.palette.grey[300],borderStyle:"solid",borderWidth:1,"& button.MuiTab-root":{borderColor:e.palette.grey[300],borderRightStyle:"solid",borderWidth:1}},"& .primary":{background:e.palette.primary.main},"& .secondary":{background:e.palette.secondary.main},"& .error":{background:e.palette.error.main},"& .info":{background:e.palette.info.dark},"& .text_primary":{color:e.palette.primary.main},"& .text_secondary":{color:e.palette.secondary.main},"& .text_error":{color:e.palette.error.main},"& .text_info":{color:e.palette.info.dark}}))),ie=({tabs:e,variant:t="scrollable",tab:r,setTab:i,indicator:s="primary",style:o})=>(0,n.jsxs)(ae,Object.assign({style:o},{children:[(0,n.jsx)(a.Tabs,Object.assign({value:r,variant:t,scrollButtons:!0,className:"tabs",classes:{indicator:s}},{children:e.map(((e,t)=>{return(0,n.jsx)(a.Tab,Object.assign({label:e.label,value:e.id},{id:`scrollable-auto-tab-${r=e.id}`,"aria-controls":`scrollable-auto-tabpanel-${r}`},{onClick:()=>i(e.id),onDragEnter:()=>i(e.id)}),e.id||t);var r}))})),e.map(((e,t)=>e.component&&(0,n.jsx)(re,Object.assign({value:r,index:e.id},{children:e.component}),t)))]})),se=({renderChildren:e})=>{const{resourceViewMode:t}=U();return"tabs"===t?(0,n.jsx)(le,{renderChildren:e}):(0,n.jsx)(oe,{renderChildren:e})},oe=({renderChildren:e})=>{const{resources:t,resourceFields:r}=U();return(0,n.jsx)(n.Fragment,{children:t.map(((t,a)=>(0,n.jsxs)("div",{children:[(0,n.jsx)(J,{resource:t}),e(t)]},`${t[r.idField]}_${a}`)))})},le=({renderChildren:e})=>{const{resources:t,resourceFields:a,selectedResource:i,handleState:s}=U(),o=t.map((t=>({id:t[a.idField],label:(0,n.jsx)(J,{resource:t}),component:(0,n.jsx)(n.Fragment,{children:e(t)})}))),l=(0,r.useMemo)((()=>{const e=t[0][a.idField];return i?t.findIndex((e=>e[a.idField]===i))<0?e:i:e}),[t,i,a.idField]);return(0,n.jsx)(ie,{tabs:o,tab:l,setTab:e=>{s(e,"selectedResource")},style:{display:"grid"}})},de=({day:e,start:t,end:r,resourceKey:i,resourceVal:s,cellRenderer:o,height:l,children:d})=>{const{editable:c}=U(),u=(({start:e,end:t,resourceKey:n,resourceVal:r})=>{const{triggerDialog:i,onDrop:s}=U(),o=(0,a.useTheme)();return{onClick:()=>{i(!0,{start:e,end:t,[n]:r})},onDragOver:e=>{e.currentTarget.style.backgroundColor=(0,a.alpha)(o.palette.secondary.main,.3),e.preventDefault()},onDragEnter:e=>{e.currentTarget.style.backgroundColor=(0,a.alpha)(o.palette.secondary.main,.3)},onDragLeave:e=>{e.currentTarget.style.backgroundColor=""},onDrop:t=>{t.preventDefault(),t.currentTarget.style.backgroundColor="";const a=t.dataTransfer.getData("text");s(a,e,n,r)},[n]:r}})({start:t,end:r,resourceKey:i,resourceVal:s});return o?o(Object.assign({day:e,start:t,end:r,height:l},u)):c?(0,n.jsx)(a.Button,Object.assign({fullWidth:!0,"aria-label":`${t.toLocaleString("en",{dateStyle:"full",timeStyle:"long"})} - ${r.toLocaleString("en",{dateStyle:"full",timeStyle:"long"})}`},u,{children:d})):null},ce=1;function ue({today:e,startHour:t,step:n,minuteHeight:r,timeZone:a}){const s=z(new Date,a),o=(0,i.differenceInMinutes)(s,(0,i.setHours)(e,t));return o*r+(o/n+ce)}const ge=e=>{const[t,a]=(0,r.useState)(ue(e));return(0,r.useEffect)((()=>{const t=setInterval((()=>a(ue(e))),6e4);return()=>clearInterval(t)}),[]),t<0?null:(0,n.jsxs)(_,Object.assign({style:{top:t,zIndex:e.zIndex}},{children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]}))},he=({todayEvents:e,today:t,startHour:a,step:s,minuteHeight:o,direction:l,timeZone:d})=>{const c=[];return(0,n.jsxs)(r.Fragment,{children:[(0,i.isToday)(t)&&(0,n.jsx)(ge,{today:t,startHour:a,step:s,minuteHeight:o,timeZone:d,zIndex:2*e.length+1}),e.map(((r,d)=>{const u=(0,i.differenceInMinutes)(r.end,r.start)*o-ce,g=(0,i.differenceInMinutes)(r.start,(0,i.setHours)(t,a)),h=u/60*ce,v=g*o+g/s,y=((e,t)=>e.filter((e=>e.event_id!==t.event_id&&((0,i.isWithinInterval)((0,i.addMinutes)(t.start,1),{start:e.start,end:e.end})||(0,i.isWithinInterval)((0,i.addMinutes)(t.end,-1),{start:e.start,end:e.end})||(0,i.isWithinInterval)((0,i.addMinutes)(e.start,1),{start:t.start,end:t.end})||(0,i.isWithinInterval)((0,i.addMinutes)(e.end,-1),{start:t.start,end:t.end})))))(e,r),p=y.filter((e=>c.includes(e.event_id)));return c.push(r.event_id),(0,n.jsx)("div",Object.assign({className:"rs__event__item",style:{height:u+h,top:v,width:p.length>0?`calc(100% - ${100-98/(p.length+1)}%)`:"98%",zIndex:e.length+d,["rtl"===l?"right":"left"]:p.length>0?100/(y.length+1)*p.length+"%":""}},{children:(0,n.jsx)(Y,{event:r})}),r.event_id)}))]})},ve=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const n=e.current,r=t.current,a=e=>{const t=e.currentTarget;null==r||r.scroll({left:t.scrollLeft}),null==n||n.scroll({left:t.scrollLeft})};return null==n||n.addEventListener("scroll",a),null==r||r.addEventListener("scroll",a),()=>{null==n||n.removeEventListener("scroll",a),null==r||r.removeEventListener("scroll",a)}})),{headersRef:e,bodyRef:t}};const ye=()=>{const{week:e,selectedDate:t,height:o,events:l,handleGotoDay:d,getRemoteEvents:c,triggerLoading:u,handleState:g,resources:h,resourceFields:v,resourceViewMode:y,fields:p,direction:m,locale:f,hourFormat:j,timeZone:x,stickyNavigation:O}=U(),{weekStartOn:w,weekDays:_,startHour:k,endHour:D,step:C,cellRenderer:M,disableGoToDay:T,headRenderer:S}=e,F=(0,i.startOfWeek)(t,{weekStartsOn:w}),W=_.map((e=>(0,i.addDays)(F,e))),q=(0,i.startOfDay)(W[0]),H=(0,i.endOfDay)(W[W.length-1]),B=(0,i.set)(t,{hours:k,minutes:0,seconds:0}),A=(0,i.set)(t,{hours:D,minutes:-C,seconds:0}),L=(0,i.eachMinuteOfInterval)({start:B,end:A},{step:C}),V=P(o,L.length),G=I(V,C),Z="12"===j?"hh:mm a":"HH:mm",{headersRef:K,bodyRef:X}=ve(),Q=(0,r.useCallback)((()=>{return e=void 0,t=void 0,r=function*(){try{u(!0);const e=yield c({start:q,end:H,view:"week"});Array.isArray(e)&&g(e,"events")}catch(e){throw e}finally{u(!1)}},new((n=void 0)||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}),[t,c]);(0,r.useEffect)((()=>{c instanceof Function&&Q()}),[Q,c]);const J=(e,t)=>{const r=(0,i.isSameDay)(q,t),a=N(e,W,x);return a.filter((e=>(0,i.isBefore)(e.start,q)?r:(0,i.isSameDay)(e.start,t))).sort(((e,t)=>t.end.getTime()-e.end.getTime())).map(((e,s)=>{const o=(0,i.isBefore)((0,i.startOfDay)(e.start),q),l=(0,i.isAfter)((0,i.endOfDay)(e.end),H),d=R(o?q:e.start,l?H:e.end)+1,c=a.filter((n=>!r&&n.event_id!==e.event_id&&R(n.start,n.end)>0&&(0,i.isWithinInterval)(t,{start:z(n.start,x),end:z(n.end,x)})));let u=s;return c.length&&(u+=c.length),(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*u+45,width:99.9*d+"%",overflowX:"hidden"}},{children:(0,n.jsx)(Y,{event:e,hasPrev:o,hasNext:l,multiday:!0})}),e.event_id)}))},ee=e=>{let t=l;e&&(t=E(l,e,v,p));const o=h.length&&"tabs"!==y,c=28*N(o?l:t,W,x,!0).length+45;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(b,Object.assign({days:W.length,ref:K,sticky:"1",stickyNavigation:O},{children:[(0,n.jsx)("span",{className:"rs__cell rs__time"}),W.map(((e,r)=>(0,n.jsxs)("span",Object.assign({className:"rs__cell rs__header "+((0,i.isToday)(e)?"rs__today_cell":""),style:{height:c}},{children:["function"==typeof S?(0,n.jsx)("div",{children:S(e)}):(0,n.jsx)(s,{date:e,onClick:T?void 0:d,locale:f}),J(t,e)]}),r)))]})),(0,n.jsx)(b,Object.assign({days:W.length,ref:X},{children:L.map(((s,o)=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("span",Object.assign({style:{height:V},className:"rs__cell rs__header rs__time"},{children:(0,n.jsx)(a.Typography,Object.assign({variant:"caption"},{children:(0,i.format)(s,Z,{locale:f})}))})),W.map(((r,a)=>{const l=new Date(`${(0,i.format)(r,"yyyy/MM/dd")} ${(0,i.format)(s,Z)}`),d=(0,i.addMinutes)(l,C),c=v.idField;return(0,n.jsxs)("span",Object.assign({className:"rs__cell "+((0,i.isToday)(r)?"rs__today_cell":"")},{children:[0===o&&(0,n.jsx)(he,{todayEvents:$(t,r,x),today:r,minuteHeight:G,startHour:k,step:C,direction:m,timeZone:x}),(0,n.jsx)(de,{start:l,end:d,day:r,height:V,resourceKey:c,resourceVal:e?e[c]:null,cellRenderer:M})]}),a)}))]},o)))}))]})};return h.length?(0,n.jsx)(se,{renderChildren:ee}):ee()},pe=require("@mui/x-date-pickers/LocalizationProvider"),me=require("@mui/x-date-pickers/AdapterDateFns"),fe=({children:e})=>{const{locale:t}=U();return(0,n.jsx)(pe.LocalizationProvider,Object.assign({dateAdapter:me.AdapterDateFns,adapterLocale:t},{children:e}))},je=require("@mui/icons-material/NavigateBeforeRounded");var be=e.n(je);const xe=require("@mui/icons-material/NavigateNextRounded");var Oe=e.n(xe);const we=e=>{var{type:t,onClick:r}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["type","onClick"]);const{direction:s}=U();let o=Oe();return"prev"===t?o="rtl"===s?Oe():be():"next"===t&&(o="rtl"===s?be():Oe()),(0,n.jsx)(a.IconButton,Object.assign({style:{padding:2},onClick:r,onDragOver:e=>{e.preventDefault(),r&&r()}},i,{children:(0,n.jsx)(o,{})}))},_e=require("@mui/x-date-pickers"),ke=({selectedDate:e,onChange:t,weekProps:s})=>{const{locale:o,navigationPickerProps:l}=U(),[d,c]=(0,r.useState)(null),{weekStartOn:u}=s,g=(0,i.startOfWeek)(e,{weekStartsOn:u}),h=(0,i.endOfWeek)(e,{weekStartsOn:u}),v=()=>{c(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(we,{type:"prev",onClick:()=>{const e=(0,i.addDays)(g,-1);t(e)},"aria-label":"previous week"}),(0,n.jsx)(a.Button,Object.assign({style:{padding:4},onClick:e=>{c(e.currentTarget)},"aria-label":"selected week"},{children:`${(0,i.format)(g,"dd",{locale:o})} - ${(0,i.format)(h,"dd MMMM yyyy",{locale:o})}`})),(0,n.jsx)(a.Popover,Object.assign({open:Boolean(d),anchorEl:d,onClose:v,anchorOrigin:{vertical:"bottom",horizontal:"left"}},{children:(0,n.jsx)(fe,{children:(0,n.jsx)(_e.DateCalendar,Object.assign({},l,{openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date),v()}}))})})),(0,n.jsx)(we,{type:"next",onClick:()=>{const e=(0,i.addDays)(h,1);t(e)},"aria-label":"next week"})]})},De=({selectedDate:e,onChange:t})=>{const{locale:s,navigationPickerProps:o}=U(),[l,d]=(0,r.useState)(null),c=()=>{d(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(we,{type:"prev",onClick:()=>{const n=(0,i.addDays)(e,-1);t(n)},"aria-label":"previous day"}),(0,n.jsx)(a.Button,Object.assign({style:{padding:4},onClick:e=>{d(e.currentTarget)},"aria-label":"selected date"},{children:(0,i.format)(e,"dd MMMM yyyy",{locale:s})})),(0,n.jsx)(a.Popover,Object.assign({open:Boolean(l),anchorEl:l,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"left"}},{children:(0,n.jsx)(fe,{children:(0,n.jsx)(_e.DateCalendar,Object.assign({},o,{openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date),c()}}))})})),(0,n.jsx)(we,{type:"next",onClick:()=>{const n=(0,i.addDays)(e,1);t(n)},"aria-label":"next day"})]})},Ce=({selectedDate:e,onChange:t})=>{const{locale:s,navigationPickerProps:o}=U(),l=(0,i.getMonth)(e),[d,c]=(0,r.useState)(null),u=()=>{c(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(we,{type:"prev",onClick:()=>{const n=l-1;t((0,i.setMonth)(e,n))},"aria-label":"previous month"}),(0,n.jsx)(a.Button,Object.assign({style:{padding:4},onClick:e=>{c(e.currentTarget)},"aria-label":"selected month"},{children:(0,i.format)(e,"MMMM yyyy",{locale:s})})),(0,n.jsx)(a.Popover,Object.assign({open:Boolean(d),anchorEl:d,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"left"}},{children:(0,n.jsx)(fe,{children:(0,n.jsx)(_e.DateCalendar,Object.assign({},o,{openTo:"month",views:["year","month"],value:e,onChange:e=>{t(e||new Date),u()}}))})})),(0,n.jsx)(we,{type:"next",onClick:()=>{const n=l+1;t((0,i.setMonth)(e,n))},"aria-label":"next month"})]})},Me=require("@mui/icons-material/MoreVert");var Te=e.n(Me);const Se=()=>{const{selectedDate:e,view:t,week:i,handleState:s,getViews:o,translations:l,navigation:d,day:c,month:u,disableViewNavigator:g,onSelectedDateChange:h,onViewChange:v,stickyNavigation:y}=U(),[p,m]=(0,r.useState)(null),f=(0,a.useTheme)(),b=(0,a.useMediaQuery)(f.breakpoints.up("sm")),x=o(),O=e=>{m(e||null)},w=e=>{s(e,"selectedDate"),h&&"function"==typeof h&&h(e)},_=e=>{s(e,"view"),v&&"function"==typeof v&&v(e)};return!d&&g?null:(0,n.jsxs)(j,Object.assign({sticky:y?"1":"0"},{children:[(0,n.jsx)("div",Object.assign({"data-testid":"date-navigator"},{children:d&&(()=>{switch(t){case"month":return(null==u?void 0:u.navigation)&&(0,n.jsx)(Ce,{selectedDate:e,onChange:w});case"week":return(null==i?void 0:i.navigation)&&(0,n.jsx)(ke,{selectedDate:e,onChange:w,weekProps:i});case"day":return(null==c?void 0:c.navigation)&&(0,n.jsx)(De,{selectedDate:e,onChange:w});default:return""}})()})),(0,n.jsxs)("div",Object.assign({"data-testid":"view-navigator",style:{visibility:g?"hidden":"visible"}},{children:[(0,n.jsx)(a.Button,Object.assign({onClick:()=>w(new Date),"aria-label":l.navigation.today},{children:l.navigation.today})),x.length>1&&(b?x.map((e=>(console.log(l.navigation[e]),"month"!==l.navigation[e].toLocaleLowerCase()?(0,n.jsx)(a.Button,Object.assign({color:e===t?"primary":"inherit",onClick:()=>_(e),onDragOver:t=>{t.preventDefault(),_(e)}},{children:l.navigation[e]}),e):(0,n.jsx)(n.Fragment,{})))):(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(a.IconButton,Object.assign({style:{padding:5},onClick:e=>{O(e.currentTarget)}},{children:(0,n.jsx)(Te(),{})})),(0,n.jsx)(a.Popover,Object.assign({open:Boolean(p),anchorEl:p,onClose:()=>{O()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},{children:(0,n.jsx)(a.MenuList,Object.assign({autoFocusItem:!!p,disablePadding:!0},{children:x.map((e=>(0,n.jsx)(a.MenuItem,Object.assign({selected:e===t,onClick:()=>{O(),_(e)}},{children:l.navigation[e]}),e)))}))}))]}))]}))]}))},Fe=require("@mui/x-date-pickers/DatePicker"),Ee=require("@mui/x-date-pickers/DateTimePicker"),Ie=({type:e="datetime",value:t,label:a,name:i,onChange:s,variant:o="outlined",error:l,errMsg:d,touched:c,required:u})=>{var g;const{translations:h}=U(),[v,y]=(0,r.useState)({touched:!1,valid:!!t,errorMsg:d||(u?(null===(g=null==h?void 0:h.validation)||void 0===g?void 0:g.required)||"Required":void 0)}),p="date"===e?Fe.DatePicker:Ee.DateTimePicker,m=v.touched&&(l||!v.valid);(0,r.useEffect)((()=>{c&&f(t)}),[c]);const f=e=>{var t;const n=!isNaN(Date.parse(e)),r="string"==typeof e&&n?new Date(e):e;let a=!0,o=d;u&&!r&&(a=!1,o=d||(null===(t=null==h?void 0:h.validation)||void 0===t?void 0:t.required)||"Required"),y((e=>Object.assign(Object.assign({},e),{touched:!0,valid:a,errorMsg:o}))),s(i,r)};return(0,n.jsx)(fe,{children:(0,n.jsx)(p,{value:t,label:a,onChange:e=>{f(e)},minutesStep:5,slotProps:{textField:{variant:o,helperText:m&&v.errorMsg,error:m,fullWidth:!0}}})})},Pe=({variant:e="outlined",label:t,placeholder:i,value:s,name:o,required:l,min:d,max:c,email:u,decimal:g,onChange:h,disabled:v,multiline:y,rows:p,touched:m})=>{const[f,j]=(0,r.useState)({touched:!1,valid:!1,errorMsg:""}),{translations:b}=U();(0,r.useEffect)((()=>{m&&x(s)}),[m]);const x=e=>{var t,n,r,a,i,s,v,y,p;const m=e;let f=!0,x="";u&&(f=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(m)&&f,x=(null===(t=null==b?void 0:b.validation)||void 0===t?void 0:t.invalidEmail)||"Invalid Email"),g&&(f=/^[0-9]+(\.[0-9]*)?$/.test(m)&&f,x=(null===(n=null==b?void 0:b.validation)||void 0===n?void 0:n.onlyNumbers)||"Only Numbers Allowed"),d&&`${m}`.trim().length<d&&(f=!1,x="function"==typeof(null===(r=null==b?void 0:b.validation)||void 0===r?void 0:r.min)?null===(a=null==b?void 0:b.validation)||void 0===a?void 0:a.min(d):(null===(i=null==b?void 0:b.validation)||void 0===i?void 0:i.min)||`Minimum ${d} letters`),c&&`${m}`.trim().length>c&&(f=!1,x="function"==typeof(null===(s=null==b?void 0:b.validation)||void 0===s?void 0:s.max)?null===(v=null==b?void 0:b.validation)||void 0===v?void 0:v.max(c):(null===(y=null==b?void 0:b.validation)||void 0===y?void 0:y.max)||`Maximum ${c} letters`),l&&`${m}`.trim().length<=0&&(f=!1,x=(null===(p=null==b?void 0:b.validation)||void 0===p?void 0:p.required)||"Required"),j({touched:!0,valid:f,errorMsg:x}),h(o,m,f)};return(0,n.jsx)(a.TextField,{variant:e,label:t&&(0,n.jsx)(a.Typography,Object.assign({variant:"body2"},{children:`${t} ${l?"*":""}`})),value:s,name:o,onChange:e=>x(e.target.value),disabled:v,error:f.touched&&!f.valid,helperText:f.touched&&!f.valid&&f.errorMsg,multiline:y,rows:p,style:{width:"100%"},InputProps:{placeholder:i||""}})},Re=require("@mui/icons-material/ExpandMore");var $e=e.n(Re);const We=({options:e,value:t,name:i,required:s,onChange:o,label:l,disabled:d,touched:c,variant:u="outlined",loading:g,multiple:h,placeholder:v,errMsg:y})=>{var p;const m=(0,a.useTheme)(),{translations:f}=U(),[j,b]=(0,r.useState)({touched:!1,valid:!!t,errorMsg:y||(s?(null===(p=null==f?void 0:f.validation)||void 0===p?void 0:p.required)||"Required":void 0)});(0,r.useEffect)((()=>{c&&x(t)}),[c]);const x=e=>{var t;const n=e;let r=!0,a=y;!s||(h?n.length:n)||(r=!1,a=y||(null===(t=null==f?void 0:f.validation)||void 0===t?void 0:t.required)||"Required"),b((e=>Object.assign(Object.assign({},e),{touched:!0,valid:r,errorMsg:a}))),o(i,n,r)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.FormControl,Object.assign({variant:u||"outlined",fullWidth:!0,error:s&&j.touched&&!j.valid,disabled:d},{children:[l&&(0,n.jsx)(a.InputLabel,Object.assign({id:`input_${i}`},{children:(0,n.jsx)(a.Typography,Object.assign({variant:"body2"},{children:`${l} ${s?"*":""}`}))})),(0,n.jsxs)(a.Select,Object.assign({label:l,labelId:`input_${i}`,value:t,onBlur:()=>{j.touched||b((e=>Object.assign(Object.assign({},e),{touched:!0,errorMsg:y||e.errorMsg})))},onChange:e=>x(e.target.value),IconComponent:g?()=>(0,n.jsx)(a.CircularProgress,{size:5}):$e(),multiple:!!h,classes:{select:"chips"===h?"flex__wrap":void 0},renderValue:t=>{if(!t||0===t.length)return(0,n.jsx)("em",{children:l});const r=[];if(h){for(const n of e)t.includes(n.value)&&r.push([n.text]);return"chips"===h?r.map(((e,t)=>(0,n.jsx)(a.Chip,{label:e,style:{margin:"0 2px"},color:"primary"},`${e}_${t}`))):r.join(",")}for(const n of e)t===n.value&&r.push([n.text]);return r.join(",")}},{children:[v&&(0,n.jsx)(a.MenuItem,Object.assign({value:""},{children:(0,n.jsx)("em",{children:v})})),e.map((e=>(0,n.jsxs)(a.MenuItem,Object.assign({value:e.value},{children:[h&&(0,n.jsx)(a.Checkbox,{checked:t.indexOf(e.value)>-1,color:"primary"}),e.text]}),e.id||e.value)))]}))]})),(0,n.jsx)(a.FormHelperText,Object.assign({style:{color:m.palette.error.main}},{children:j.touched&&!j.valid&&j.errorMsg}))]})};const Ne=(e,t)=>{var n;const r={};for(const a of e){const e=F(a,a.default,t),i=F(a,null==t?void 0:t[a.name],t);r[a.name]={value:i.value||e.value||"",validity:!(null===(n=a.config)||void 0===n?void 0:n.required)||!!i.validity||!!e.validity,type:a.type,config:a.config}}return Object.assign({event_id:{value:(null==t?void 0:t.event_id)||null,validity:!0,type:"hidden"},title:{value:(null==t?void 0:t.title)||"",validity:!!(null==t?void 0:t.title),type:"input",config:{label:"Title",required:!0,min:3}},start:{value:(null==t?void 0:t.start)||new Date,validity:!0,type:"date",config:{label:"Start",sm:6}},end:{value:(null==t?void 0:t.end)||new Date,validity:!0,type:"date",config:{label:"End",sm:6}}},r)},qe=()=>{const{fields:e,dialog:t,triggerDialog:s,selectedRange:o,selectedEvent:l,resourceFields:d,selectedResource:c,triggerLoading:u,onConfirm:g,customEditor:h,confirmEvent:v,dialogMaxWidth:y,translations:p}=U(),[m,f]=(0,r.useState)(Ne(e,l||o)),[j,b]=(0,r.useState)(!1),x=(0,a.useTheme)(),O=(0,a.useMediaQuery)(x.breakpoints.down("sm")),w=(e,t,n)=>{f((r=>Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},r[e]),{value:t,validity:n})})))},_=t=>{t&&f(Ne(e)),s(!1)},k=()=>{return e=void 0,t=void 0,r=function*(){let e={};for(const t in m)if(e[t]=m[t].value,!h&&!m[t].validity)return b(!0);try{u(!0),e.end=e.start>=e.end?(0,i.addMinutes)(e.start,(0,i.differenceInMinutes)(null==o?void 0:o.end,null==o?void 0:o.start)):e.end;const t=(null==l?void 0:l.event_id)?"edit":"create";g?e=yield g(e,t):e.event_id=(null==l?void 0:l.event_id)||Date.now().toString(36)+Math.random().toString(36).slice(2),v(e,t),_(!0)}catch(e){console.error(e)}finally{u(!1)}},new((n=void 0)||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r},D=t=>{var r,a,i;const s=m[t];switch(s.type){case"input":return(0,n.jsx)(Pe,Object.assign({value:s.value,name:t,onChange:w,touched:j},s.config,{label:p.event[t]||(null===(r=s.config)||void 0===r?void 0:r.label)}));case"date":return(0,n.jsx)(Ie,Object.assign({value:s.value,name:t,onChange:(...e)=>w(...e,!0),touched:j},s.config,{label:p.event[t]||(null===(a=s.config)||void 0===a?void 0:a.label)}));case"select":const o=e.find((e=>e.name===t));return(0,n.jsx)(We,Object.assign({value:s.value,name:t,options:(null==o?void 0:o.options)||[],onChange:w,touched:j},s.config,{label:p.event[t]||(null===(i=s.config)||void 0===i?void 0:i.label)}));default:return""}};return(0,n.jsx)(a.Dialog,Object.assign({open:t,fullScreen:O,maxWidth:y},{children:(()=>{if(h){const e={state:m,close:()=>s(!1),loading:e=>u(e),edited:l,onConfirm:v,[d.idField]:c};return h(e)}return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(a.DialogTitle,{children:l?p.form.editTitle:p.form.addTitle}),(0,n.jsx)(a.DialogContent,Object.assign({style:{overflowX:"hidden"}},{children:(0,n.jsx)(a.Grid,Object.assign({container:!0,spacing:2},{children:Object.keys(m).map((e=>{var t;const r=m[e];return(0,n.jsx)(a.Grid,Object.assign({item:!0,sm:null===(t=r.config)||void 0===t?void 0:t.sm,xs:12},{children:D(e)}),e)}))}))})),(0,n.jsxs)(a.DialogActions,{children:[(0,n.jsx)(a.Button,Object.assign({color:"inherit",fullWidth:!0,onClick:()=>_()},{children:p.form.cancel})),(0,n.jsx)(a.Button,Object.assign({color:"primary",fullWidth:!0,onClick:k},{children:p.form.confirm}))]})]})})()}))},ze=({events:e,today:t,eachWeekStart:s,eachFirstDayInCalcRow:o,daysList:l,onViewMore:d,cellHeight:c})=>{const u=Math.round((c-27)/28-1),{translations:g,month:h,locale:v,timeZone:y}=U(),p=(0,r.useMemo)((()=>{const r=[];for(let c=0;c<Math.min(e.length,u+1);c++){const p=q(e[c],y),m=!!o&&(0,i.isBefore)(p.start,o),f=m&&o?o:p.start;let j=R(f,p.end)+1;const b=(0,i.differenceInCalendarWeeks)(p.end,f,{weekStartsOn:null==h?void 0:h.weekStartOn,locale:v})>0;if(b){const e=(0,i.startOfWeek)(p.start,{weekStartsOn:null==h?void 0:h.weekStartOn,locale:v}),t=(0,i.closestTo)(e,s);t&&(j=l.length-(o?0:(0,i.differenceInDays)(p.start,t)))}const x=e.filter((e=>{const n=R(e.start,e.end),r=n>0,a=0===n&&((0,i.isWithinInterval)(e.start,{start:(0,i.startOfDay)(t),end:(0,i.endOfDay)(t)})||(0,i.isWithinInterval)(e.end,{start:(0,i.startOfDay)(t),end:(0,i.endOfDay)(t)})),s=(0,i.isBefore)(e.start,(0,i.addMinutes)((0,i.startOfDay)(t),1)),l=(0,i.isAfter)(e.end,(0,i.addMinutes)((0,i.endOfDay)(t),-1)),d=s&&l||s&&a||l&&a||a&&r;return!o&&e.event_id!==p.event_id&&u>c&&d}));let O=c;x.length&&(O+=x.length);const w=28*Math.min(O,u)+27;if(O>=u){r.push((0,n.jsx)(a.Typography,Object.assign({width:"100%",className:"rs__multi_day rs__hover__op",style:{top:w,fontSize:11},onClick:e=>{e.stopPropagation(),d(p.start)}},{children:`${Math.abs(e.length-c)} ${g.moreEvents}`}),c));break}r.push((0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:w,width:100*j+"%"}},{children:(0,n.jsx)(Y,{event:p,showdate:!1,multiday:R(p.start,p.end)>0,hasPrev:m,hasNext:b})}),`${p.event_id}_${c}`))}return r}),[e,y,o,null==h?void 0:h.weekStartOn,v,u,s,l.length,t,g.moreEvents,d]);return(0,n.jsx)(r.Fragment,{children:p})};const He=()=>{const{month:e,selectedDate:t,height:s,events:o,handleGotoDay:l,getRemoteEvents:d,triggerLoading:c,handleState:u,resources:g,resourceFields:h,fields:v,locale:y,hourFormat:p,stickyNavigation:m,onViewChange:f}=U(),{weekStartOn:j,weekDays:x,startHour:O,endHour:w,cellRenderer:_,headRenderer:k,disableGoToDay:D}=e,C=(0,i.startOfMonth)(t),M=(0,i.endOfMonth)(t),T=(0,i.eachWeekOfInterval)({start:C,end:M},{weekStartsOn:j}),S="12"===p?"hh:mm a":"HH:mm",F=x.map((e=>(0,i.addDays)(T[0],e))),I=s/T.length,P=(0,a.useTheme)(),{headersRef:R,bodyRef:$}=ve(),N=(0,r.useCallback)((()=>{return e=void 0,t=void 0,r=function*(){try{c(!0);const e=T[0],t=(0,i.addDays)(T[T.length-1],F.length),n=yield d({start:e,end:t,view:"month"});n&&(null==n?void 0:n.length)&&u(n,"events")}catch(e){throw e}finally{c(!1)}},new((n=void 0)||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}),[t,d]);(0,r.useEffect)((()=>{d instanceof Function&&N()}),[N,d]);const q=(0,r.useCallback)((e=>{let s=W(o);e&&(s=E(o,e,h,v));const d=[];for(const o of T){const c=x.map((d=>{const c=(0,i.addDays)(o,d),u=new Date(`${(0,i.format)((0,i.setHours)(c,O),`yyyy/MM/dd ${S}`)}`),g=new Date(`${(0,i.format)((0,i.setHours)(c,w),`yyyy/MM/dd ${S}`)}`),v=h.idField,y=(0,i.isSameDay)(o,c)?c:null,p=s.filter((e=>y&&(0,i.isWithinInterval)(y,{start:(0,i.startOfDay)(e.start),end:(0,i.endOfDay)(e.end)})||(0,i.isSameDay)(e.start,c)));return(0,n.jsxs)("span",Object.assign({style:{height:I},className:"rs__cell"},{children:[(0,n.jsx)(de,{start:u,end:g,day:t,height:I,resourceKey:v,resourceVal:e?e[v]:null,cellRenderer:_}),(0,n.jsxs)(r.Fragment,{children:["function"==typeof k?(0,n.jsx)("div",Object.assign({style:{position:"absolute",top:0}},{children:k(c)})):(0,n.jsx)(a.Avatar,Object.assign({style:{width:27,height:27,position:"absolute",top:0,background:(0,i.isToday)(c)?P.palette.secondary.main:"transparent",color:(0,i.isToday)(c)?P.palette.secondary.contrastText:"",marginBottom:2}},{children:(0,n.jsx)(a.Typography,Object.assign({color:(0,i.isSameMonth)(c,C)?"textPrimary":"#ccc",className:D?"":"rs__hover__op",onClick:e=>{e.stopPropagation(),D||(l(c),f&&"function"==typeof f&&f("day"))}},{children:(0,i.format)(c,"dd")}))})),(0,n.jsx)(ze,{events:p,today:c,eachWeekStart:T,eachFirstDayInCalcRow:y,daysList:F,onViewMore:e=>{l(e),f&&"function"==typeof f&&f("day")},cellHeight:I})]})]}),d.toString())}));d.push((0,n.jsx)(r.Fragment,{children:c},o.toString()))}return d}),[I,_,F,D,T,w,o,v,S,l,k,C,h,t,O,P.palette.secondary.contrastText,P.palette.secondary.main,x,f]),z=(0,r.useCallback)((e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b,Object.assign({days:F.length,ref:R,indent:"0",sticky:"1",stickyNavigation:m},{children:F.map(((e,t)=>(0,n.jsx)(a.Typography,Object.assign({className:"rs__cell rs__header rs__header__center",align:"center",variant:"body2"},{children:(0,i.format)(e,"EE",{locale:y})}),t)))})),(0,n.jsx)(b,Object.assign({days:F.length,ref:$,indent:"0"},{children:q(e)}))]})),[$,F,R,y,q,m]);return g.length?(0,n.jsx)(se,{renderChildren:z}):z()};const Be=()=>{const{day:e,selectedDate:t,events:o,height:l,getRemoteEvents:d,triggerLoading:c,handleState:u,resources:g,resourceFields:h,resourceViewMode:v,fields:y,direction:p,locale:m,hourFormat:f,timeZone:j,stickyNavigation:x}=U(),{startHour:O,endHour:w,step:_,cellRenderer:k,headRenderer:D}=e,C=(0,i.set)(t,{hours:O,minutes:0,seconds:0}),M=(0,i.set)(t,{hours:w,minutes:-_,seconds:0}),T=(0,i.eachMinuteOfInterval)({start:C,end:M},{step:_}),S=P(l,T.length),F=I(S,_),R="12"===f?"hh:mm a":"HH:mm",{headersRef:W,bodyRef:q}=ve(),z=(0,r.useCallback)((()=>{return e=void 0,t=void 0,r=function*(){try{c(!0);const e=(0,i.addDays)(C,-1),t=(0,i.addDays)(M,1),n=yield d({start:e,end:t,view:"day"});n&&(null==n?void 0:n.length)&&u(n,"events")}catch(e){throw e}finally{c(!1)}},new((n=void 0)||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}),[t,d]);(0,r.useEffect)((()=>{d instanceof Function&&z()}),[z,d]);const H=e=>{const r=N(e,t,j);return(0,n.jsx)("div",Object.assign({className:"rs__block_col",style:{height:28*r.length}},{children:r.map(((e,r)=>{const a=(0,i.isBefore)(e.start,(0,i.startOfDay)(t)),s=(0,i.isAfter)(e.end,(0,i.endOfDay)(t));return(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*r,width:"99.9%",overflowX:"hidden"}},{children:(0,n.jsx)(Y,{event:e,multiday:!0,hasPrev:a,hasNext:s})}),e.event_id)}))}))},B=e=>{let l=o;e&&(l=E(o,e,h,y));const d=g.length&&"tabs"!==v,c=28*N(d?o:l,t,j).length+45;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(b,Object.assign({days:1,ref:W,sticky:"1",stickyNavigation:x},{children:[(0,n.jsx)("span",{className:"rs__cell"}),(0,n.jsxs)("span",Object.assign({className:"rs__cell rs__header "+((0,i.isToday)(t)?"rs__today_cell":""),style:{height:c}},{children:["function"==typeof D?(0,n.jsx)("div",{children:D(t)}):(0,n.jsx)(s,{date:t,locale:m}),H(l)]}))]})),(0,n.jsx)(b,Object.assign({days:1,ref:q},{children:T.map(((s,o)=>{const d=new Date(`${(0,i.format)(t,"yyyy/MM/dd")} ${(0,i.format)(s,R)}`),c=(0,i.addMinutes)(d,_),u=h.idField;return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("span",Object.assign({className:"rs__cell rs__header rs__time",style:{height:S}},{children:(0,n.jsx)(a.Typography,Object.assign({variant:"caption"},{children:(0,i.format)(s,R,{locale:m})}))})),(0,n.jsxs)("span",Object.assign({className:"rs__cell "+((0,i.isToday)(t)?"rs__today_cell":"")},{children:[0===o&&(0,n.jsx)(he,{todayEvents:$(l,t,j),today:C,minuteHeight:F,startHour:O,step:_,direction:p,timeZone:j}),(0,n.jsx)(de,{start:d,end:c,day:t,height:S,resourceKey:u,resourceVal:e?e[u]:null,cellRenderer:k})]}))]},o)}))}))]})};return g.length?(0,n.jsx)(se,{renderChildren:B}):B()},Ae=(0,r.forwardRef)((function(e,t){const i=U(),{view:s,dialog:o,loading:l,loadingComponent:d,resourceViewMode:c,resources:u,translations:g}=i,h=(0,r.useMemo)((()=>{switch(s){case"month":return(0,n.jsx)(He,{});case"week":return(0,n.jsx)(ye,{});case"day":return(0,n.jsx)(Be,{});default:return""}}),[s]),v=(0,r.useMemo)((()=>(0,n.jsx)("div",Object.assign({className:"rs__table_loading"},{children:d||(0,n.jsx)("div",Object.assign({className:"rs__table_loading_internal"},{children:(0,n.jsxs)("span",{children:[(0,n.jsx)(a.CircularProgress,{size:50}),(0,n.jsx)(a.Typography,Object.assign({align:"center"},{children:g.loading}))]})}))}))),[d,g.loading]);return(0,n.jsxs)(m,Object.assign({dialog:o?1:0,"data-testid":"rs-wrapper",ref:e=>{t&&(t.current={el:e,scheduler:i})}},{children:[l?v:null,(0,n.jsx)(Se,{}),(0,n.jsx)(f,Object.assign({resource_count:"tabs"===c?1:u.length,sx:{overflowX:"default"===c&&u.length>1?"auto":void 0},"data-testid":"grid"},{children:h})),o&&(0,n.jsx)(qe,{})]}))}));const Le=({children:e,initial:t})=>{const[a,s]=(0,r.useState)(Object.assign(Object.assign({},K),Z(t)));(0,r.useEffect)((()=>{s((e=>Object.assign(Object.assign({},e),{onEventDrop:t.onEventDrop,customEditor:t.customEditor,events:t.events||[]})))}),[t.onEventDrop,t.customEditor,t.events]);const o=()=>(e=>{const t=[];return e.month&&t.push("month"),e.week&&t.push("week"),e.day&&t.push("day"),t})(a),l=e=>{void 0===t.loading&&s((t=>Object.assign(Object.assign({},t),{loading:e})))},d=(e,t)=>{let n;n="edit"===t?Array.isArray(e)?a.events.map((t=>{const n=e.find((e=>e.event_id===t.event_id));return n?Object.assign(Object.assign({},t),n):t})):a.events.map((t=>t.event_id===e.event_id?Object.assign(Object.assign({},t),e):t)):a.events.concat(e),s((e=>Object.assign(Object.assign({},e),{events:n})))};return(0,n.jsx)(X.Provider,Object.assign({value:Object.assign(Object.assign({},a),{handleState:(e,t)=>{s((n=>Object.assign(Object.assign({},n),{[t]:e})))},getViews:o,triggerDialog:(e,t)=>{const n=t;s((t=>{var r;return Object.assign(Object.assign({},t),{dialog:e,selectedRange:(null==n?void 0:n.event_id)?void 0:n||{start:new Date,end:new Date(Date.now()+36e5)},selectedEvent:(null==n?void 0:n.event_id)?n:void 0,selectedResource:null==n?void 0:n[null===(r=a.resourceFields)||void 0===r?void 0:r.idField]})}))},triggerLoading:l,handleGotoDay:e=>{const t=o();t.includes("day")?s((t=>Object.assign(Object.assign({},t),{view:"day",selectedDate:e}))):t.includes("week")?s((t=>Object.assign(Object.assign({},t),{view:"week",selectedDate:e}))):console.warn("No Day/Week views available")},confirmEvent:d,onDrop:(e,t,n,r)=>{return s=void 0,o=void 0,u=function*(){var s;const o=a.events.find((t=>"number"==typeof t.event_id?t.event_id===+e:t.event_id===e)),c=a.fields.find((e=>e.name===n)),u=!!(null===(s=null==c?void 0:c.config)||void 0===s?void 0:s.multiple);let g=r;if(c){const e=o[n],a=F(c,e,o).value;if(u)if(a.includes(r)){if((0,i.isEqual)(o.start,t))return;g=a}else g=a.length>1?[...a,r]:[r]}if((0,i.isEqual)(o.start,t)&&(!g||!u&&g===o[n]))return;const h=(0,i.differenceInMinutes)(o.end,o.start),v=Object.assign(Object.assign({},o),{start:t,end:(0,i.addMinutes)(t,h),[n]:g||""});if(!a.onEventDrop||"function"!=typeof a.onEventDrop)return d(v,"edit");try{l(!0);const e=yield a.onEventDrop(t,v,o);e&&d(e,"edit")}finally{l(!1)}},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{a(u.next(e))}catch(e){t(e)}}function r(e){try{a(u.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof c?a:new c((function(e){e(a)}))).then(n,r)}a((u=u.apply(s,o||[])).next())}));var s,o,c,u}})},{children:e}))},Ve=(0,r.forwardRef)((function(e,t){return(0,n.jsx)(Le,Object.assign({initial:e},{children:(0,n.jsx)(Ae,{ref:t})}))}));module.exports=t})();